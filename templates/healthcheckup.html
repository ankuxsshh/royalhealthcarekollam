{% extends 'base.html' %}

{% block title %}Health Checkup Form | Royal Health Care{% endblock %}

{% block content %}
<!-- Background Image Section -->
<section id="background-section" class="d-flex align-items-center justify-content-center"
    style="background-image: url('https://images.unsplash.com/photo-1674702727317-d29b2788dc4a?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bWVkaWNhbCUyMHdhbGxwYXBlcnxlbnwwfHwwfHx8MA%3D%3D'); background-size: cover; background-position: center center; height: 30vh; max-width: 100%; color: #fff; filter: grayscale(0.5);">
    <div class="container text-center">
        <h1 class="lead"
            style="font-weight: bold; font-size: 38px; color: rgb(255, 255, 255); text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5)">
            Health Checkup Form</h1>
        <p class="lead"
            style="font-weight: bold; font-size: 14px; color: rgb(255, 255, 255); text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5)">
            Home <i class="fa-solid fa-angles-right"></i> Health Checkup Form
        </p>
    </div>
</section>
<!-- /Background Image Section -->

<!-- Health Checkup Form Section -->
<section id="health-checkup-form" class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="form-header text-center mb-5">
                    <h2 class="text-danger"><i class="fas fa-notes-medical me-2"></i>Health Checkup Booking Form</h2>
                </div>

                <form id="healthForm" class="p-4">
                    
                    <!-- Patient Information -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-user me-2"></i>Patient Information</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="fullName" class="form-label">Full Name*</label>
                                <input type="text" class="form-control" id="fullName" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Gender*</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gender" id="male" value="Male" required>
                                        <label class="form-check-label" for="male">Male</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gender" id="female" value="Female">
                                        <label class="form-check-label" for="female">Female</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gender" id="other" value="Other">
                                        <label class="form-check-label" for="other">Other</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label for="age" class="form-label">Age*</label>
                                <input type="number" class="form-control" id="age" required>
                            </div>
                            <div class="col-md-4">
                                <label for="dob" class="form-label">Date of Birth*</label>
                                <input type="date" class="form-control" id="dob" required>
                            </div>
                            <div class="col-md-4">
                                <label for="contact" class="form-label">Contact Number*</label>
                                <input type="tel" class="form-control" id="contact" required>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email*</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-12">
                                <label for="address" class="form-label">Address*</label>
                                <textarea class="form-control" id="address" rows="2" required></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Appointment Details -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-calendar-alt me-2"></i>Preferred Appointment</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="preferredDate" class="form-label">Preferred Date*</label>
                                <input type="date" class="form-control" id="preferredDate" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Preferred Time Slot*</label>
                                <select id="timeSlot" class="form-select" required>
                                    <option value="">Select...</option>
                                    <option value="Morning">Morning</option>
                                    <option value="Afternoon">Afternoon</option>
                                    <option value="Evening">Evening</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="altDate" class="form-label">Alternative Date (Optional)</label>
                                <input type="date" class="form-control" id="altDate">
                            </div>
                        </div>
                    </div>

                    <!-- Checkup Package -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-stethoscope me-2"></i>Type of Health Checkup</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="fullBody"><label class="form-check-label" for="fullBody">Full Body Health Checkup</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="wellWomen"><label class="form-check-label" for="wellWomen">Well Women Health Checkup</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="executive"><label class="form-check-label" for="executive">Executive Health Checkup</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="diabetes"><label class="form-check-label" for="diabetes">Diabetes Health Package</label></div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="routine"><label class="form-check-label" for="routine">Routine Health Package</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="pediatric"><label class="form-check-label" for="pediatric">Pediatric Health Package</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="senior"><label class="form-check-label" for="senior">Senior Citizen Checkup</label></div>
                                <div class="form-check"><input type="checkbox" class="form-check-input" id="preEmployment"><label class="form-check-label" for="preEmployment">Pre-employment Checkup</label></div>
                            </div>
                            <div class="col-12">
                                <label for="customTests" class="form-label">Custom/Specific Tests</label>
                                <input type="text" class="form-control" id="customTests">
                            </div>
                        </div>
                    </div>

                    <!-- Medical History -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-file-medical me-2"></i>Medical History</h4>
                        <div class="mb-3">
                            <label>Existing Medical Conditions?</label><br>
                            <input type="radio" name="conditions" value="Yes"> Yes
                            <input type="radio" name="conditions" value="No" class="ms-3"> No
                            <input type="text" class="form-control mt-2" id="conditionDetails" placeholder="If yes, please specify">
                        </div>
                        <div class="mb-3">
                            <label>Currently taking any medications?</label><br>
                            <input type="radio" name="medications" value="Yes"> Yes
                            <input type="radio" name="medications" value="No" class="ms-3"> No
                            <input type="text" class="form-control mt-2" id="medicationDetails" placeholder="If yes, please list">
                        </div>
                    </div>

                    <!-- Additional Info -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-info-circle me-2"></i>Additional Information</h4>
                        <textarea class="form-control" id="additionalInfo" rows="3"></textarea>
                    </div>

                    <!-- Declaration -->
                    <div class="form-section mb-5">
                        <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-file-signature me-2"></i>Declaration</h4>
                        <div class="form-check mb-3">
                            <input type="checkbox" class="form-check-input" id="declaration" required>
                            <label class="form-check-label" for="declaration">I confirm that the above information is accurate to the best of my knowledge. I agree to be contacted by the hospital for confirmation and further instructions.</label>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="signature" class="form-label">Signature</label>
                                <input type="text" class="form-control" id="signature">
                            </div>
                            <div class="col-md-6">
                                <label for="declDate" class="form-label">Date</label>
                                <input type="date" class="form-control" id="declDate">
                            </div>
                        </div>
                    </div>

                    <!-- Submit -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-danger btn-lg px-5 py-3">
                            <i class="fas fa-paper-plane me-2"></i>Submit Booking
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</section>

<style>
    .form-section { background: #fff; padding: 1.5rem; border-radius: .5rem; box-shadow: 0 .125rem .25rem rgba(0,0,0,.075); }
    .form-header h2 { color: rgb(229,9,19); font-weight: 600; }
    .form-control, .form-select { padding: .75rem 1rem; border-radius: .5rem; border: 1px solid #ced4da; }
    .form-control:focus, .form-select:focus { border-color: #86b7fe; box-shadow: 0 0 0 .25rem rgba(13,110,253,.25); }
    .btn-danger { background: rgb(229,9,19); border: none; }
    .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,.1); }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('healthForm');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Basic Validation
        const requiredFields = form.querySelectorAll('[required]');
        let valid = true;
        requiredFields.forEach(f => {
            if (!f.value.trim() && !f.checked) { valid = false; f.classList.add('is-invalid'); }
            else { f.classList.remove('is-invalid'); }
        });

        if (!valid) { alert("Please fill all required fields."); return; }

        // Collect data
        const data = {
            patient: {
                fullName: document.getElementById('fullName').value,
                gender: document.querySelector('input[name="gender"]:checked')?.value,
                age: document.getElementById('age').value,
                dob: document.getElementById('dob').value,
                contact: document.getElementById('contact').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
            },
            appointment: {
                preferredDate: document.getElementById('preferredDate').value,
                timeSlot: document.getElementById('timeSlot').value,
                altDate: document.getElementById('altDate').value,
            },
            checkup: {
                fullBody: document.getElementById('fullBody').checked,
                wellWomen: document.getElementById('wellWomen').checked,
                executive: document.getElementById('executive').checked,
                diabetes: document.getElementById('diabetes').checked,
                routine: document.getElementById('routine').checked,
                pediatric: document.getElementById('pediatric').checked,
                senior: document.getElementById('senior').checked,
                preEmployment: document.getElementById('preEmployment').checked,
                customTests: document.getElementById('customTests').value,
            },
            medicalHistory: {
                conditions: document.querySelector('input[name="conditions"]:checked')?.value,
                conditionDetails: document.getElementById('conditionDetails').value,
                medications: document.querySelector('input[name="medications"]:checked')?.value,
                medicationDetails: document.getElementById('medicationDetails').value,
            },
            additionalInfo: document.getElementById('additionalInfo').value,
            declaration: {
                signedBy: document.getElementById('signature').value,
                date: document.getElementById('declDate').value,
            }
        };

        console.log("Form submitted:", data);
        alert("âœ… Thank you! Your health checkup booking request has been submitted.");
        form.reset();
    });
});
</script>

{% endblock %}
